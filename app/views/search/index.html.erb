<div class="row">
  <div class="col-md-12" style="margin:10px 0;">
    <%= render "shared/search" %>
  </div>
  <div class="col-md-12">
    
  </div>
</div>


<% if @grouped_results %>
  <% @grouped_results.each do |group, results| %>
    <table class="table table-bordered table-responsive">
      <thead>
        <tr>
          <th><%= group.pluralize %></th>
        </tr>
      </thead>
      <tbody>
        <% results.each do |result| %>
          <tr>
            <td>
              <%= link_to result['full_entry'], "#{result['links']['human']}" %><br>
              <!-- <%= content_tag :span, "#{result['type']}<br>".html_safe if result['type'] %> -->
              <small><%= result['links']['human'] %></small>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
<% else %>
  <table class="table table-bordered table-responsive">
    <thead>
      <tr>
        <th>Search Results</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          Empty
        </td>
      </tr>
    </tbody>
  </table>
<% end %>

<% content_for :sidebar do %>
	<h4>Filter</h4>
	<p>
    List of active filters<br>
    <strong><%= params[:q] %></strong>
  </p>

  <br>
  <%= content_tag :p, 'Searching all registered, searchable collections.', class: "text-muted" if !user_signed_in? %>

  <%= content_tag :h4, "Looking for personalized content in:", class: 'text-muted' if user_signed_in? %>
  <%= render current_user.oread_enrolled_applications.order(name: :asc) if user_signed_in? %>

  <%= content_tag :h4, "Looking for unpublished content in:", class: 'text-muted' if user_signed_in? %>
  <%= render current_user.oread_token_applications.where(id: current_user.oread_enrolled_application_ids).order(name: :asc).uniq if user_signed_in? %>
<% end %>