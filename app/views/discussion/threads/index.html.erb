<%= content_tag :div, class: "row" do %>
  <div class="col-md-5">
    <%= form_tag [@namespace, @repository, @entry, :discussion, :threads], method: :get, class: "" do %>
      <%= search_field_tag 'q', params[:q], placeholder: "Search discussions", class: "form-control", autofocus: true %>
    <% end %>
    <%= content_tag :div, style: 'margin-top:10px;' do %>
      <%= link_to fa_stacked_icon('inverse times', base: 'square', text: 'Clear current search query, and sorts', style: 'font-size:.6em;'), [@namespace, @repository, @entry, :discussion, :threads], class: 'no-link text-strong text-small', style: 'color:#565656;' %>
    <% end if params[:q] %>
  </div>
  <div class="col-md-2 col-md-offset-5">
    <%= link_to 'New Discussion', [:new, @namespace, @repository, @entry, :discussion, :thread], class: 'btn btn-default text-strong pull-right' %>
  </div>
<% end %>

<div class="row --spacious-20">
  <div class="col-md-12">
    <div id='threads'>
      <table class="table table-bordered table-hover">
        <thead style="background-color:#F5F5F5;">
        <tr>
          <th style="font-weight: normal;">
            <%= link_to [@namespace, @repository, @entry, :discussion, :threads, q: 'is:open'], class: "no-link#{' text-strong' if params[:q] && params[:q].include?('is:open')}" do %>
              <%= fa_stacked_icon('exclamation', base: "circle-o", class: 'text-small', style: 'font-size:.7em;') %>
              <%= @threads.opend.count %> Open
            <% end %>
            <%= link_to [@namespace, @repository, @entry, :discussion, :threads, q: 'is:closed'], class: "no-link#{' text-strong' if params[:q] && params[:q].include?('is:closed')}", style: 'margin-left:10px;' do %>
              <%= fa_stacked_icon('check', base: "circle-o", class: 'text-small', style: 'font-size:.7em;') %>
              <%= @threads.closed.count %> Closed
            <% end %>
            <%= content_tag :div, class: "dropdown pull-right", style: "display:inline;" do %>
              <a class="dropdown-toggle no-link text-strong" style="cursor: pointer;" id="sort-options" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Sort
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="sort-options">
                <%= content_tag :li, '' %>
                <%= content_tag :li, '' %>
              </ul>
            <% end %>

          </th>
        </tr>
        </thead>
        <tbody>
          <%= render @results %>
        </tbody>
      </table>
    </div>
    <div id="pagination-results">
    </div>
  </div>
</div>