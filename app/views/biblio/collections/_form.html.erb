<%= simple_form_for @collection, 
  html: { class: 'form-horizontal' },
  wrapper: :horizontal_form do |f| %>
  <%= f.error_notification %>
  
  <%= f.input :editor_ids, 
    collection: @creators, 
    label_method: :name, 
    value_method: :id, 
    label: 'Editors', 
    selected: @collection.creatorships.map(&:agent_appellation_id), 
    input_html: {
      multiple: true, 
      id: 'creators_names',
      class: 'creators-selectize'
    } %>
  
  <%= f.input :year %>
  <%= f.input :month %>
  
  <%= f.input :title, as: :text %>

  <%= f.input :publisher_id, 
    collection: Zensus::Appellation.all, 
    label_method: :name, 
    value_method: :id, 
    include_blank: false, 
    label: "Publisher", 
    selected: @collection.publisher_id, 
    input_html: {
      class: 'publisher-selectize'
    } %>
  
  <hr>
  
  <%= f.input :place_ids, 
    collection: Locate::Toponym.all, 
    label_method: :given, 
    value_method: :id, 
    label: 'Places', 
    selected: @collection.place_ids, 
    input_html: {
      multiple: true, 
      id: 'places_names',
      class: 'places-selectize'
    } %>
  
  <%= f.input :serie, 
    collection: Biblio::Serie.all, 
    label_method: :title, 
    value_method: :id, 
    include_blank: true, 
    label: "Serie", 
    selected: @collection.serie.try(:id), 
    input_html: {
      id: 'serie_title',
      class: 'serie-selectize'
    } %>
  
  <%= f.input :volume %>
  <%= f.input :edition %>

  <%= f.input :organization_id, 
    collection: Zensus::Appellation.all, 
    label_method: :name, 
    value_method: :id, 
    include_blank: true, 
    label: "Organization", 
    selected: @collection.organization_id, 
    input_html: {
      class: 'organization-selectize'
    } %>

  <hr>

  <%= f.input :note %>
  <%= f.input :key %>

  <%= f.input :print_isbn %>
  <%= f.input :url %>
  <%= f.input :doi %>
  <%= f.input :abstract, as: :text %>
  
  <hr>

  <%= f.input :tag_list, 
    as: :string,
    input_html: {
      value: f.object.tag_list.join(','),
      id: 'vocab_tag_list' }, 
    label: "Tags <span class='text-muted' style='font-weight:normal;'>(separate with comma)</span>".html_safe,
    hint: 'Add tags to categorize the collection and make it more discoverable.' %>
  
    <div class="row">
      <div class="col-md-6">
        <hr>
        <%= f.submit class: 'btn btn-primary' %>
        <%= link_to 'Cancel', (@collection.new_record? ? biblio_entries_path : @collection), class: "btn btn-default" %>
      </div>
    </div>

<% end %>

<% content_for :modals do %>
  <%= render 'zensus/appellations/new_modal' %>
  <%= render 'biblio/series/new_modal' %>
<% end %>