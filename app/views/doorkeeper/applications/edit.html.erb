<% title "Edit #{@application.name}" %>

<% content_for :breadcrumbs do %>
  <%= content_tag :li, link_to('OAuth applications', oauth_applications_path)%>
  <%= content_tag :li, yield(:title), class: 'active' %>
<% end %>


<%= content_tag :div, class: 'row' do %>
  <%= content_tag :div, class: 'col-md-12' do %>

    <%= content_tag :ul, class: 'nav nav-pills' do %>
      <%= content_tag :li, link_to(@application.name, edit_oauth_application_path(@application)), class: "#{' active text-strong' if current_page?(edit_oauth_application_path(@application))}" %>
      <%= content_tag :li, link_to('Scopes', oauth_application_accessibilities_path(@application)), class: "#{' active text-strong' if current_page?(oauth_applications_path)}", style: 'margin: 0 20px;' %>
      <%= content_tag :li, link_to('Accessors', oauth_application_accessibilities_path(@application)), class: "#{' active text-strong' if current_page?(oauth_application_accessibilities_path(@application))}" %>
    <% end %>

    <h4><%= t('.application_id') %>:</h4>
    <p><code id="application_id"><%= @application.uid %></code></p>

    <% if can?(:manage, @application) %>
      <h4><%= t('.secret') %>:</h4>
      <p><code id="secret"><%= @application.secret %></code></p>
    <% end %>

    <%= render 'form', application: @application %>
    
    <h4><%= t('.callback_urls') %>:</h4>
    <table>
      <% @application.redirect_uri.split.each do |uri| %>
        <tr>
          <td>
            <code><%= uri %></code>
          </td>
          <td>
            <%= link_to t('doorkeeper.applications.buttons.authorize'), oauth_authorization_path(client_id: @application.uid, redirect_uri: uri, response_type: 'code', scope: @application.scopes), class: 'btn btn-success', target: '_blank' %>
          </td>
        </tr>
      <% end %>
    </table>
  <% end %>

<% end %>